<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>Pilot :: tests</title>

	<!--script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.15/require.js"></script>

	<script src="http://code.jquery.com/qunit/qunit-git.js"></script>
	<link href="http://code.jquery.com/qunit/qunit-git.css" rel="stylesheet"/-->

	<script>
		if (!window.jQuery) {
			document.write('<script src="/js/require.js"><' + '/script>');
			document.write('<script src="/js/qunit/qunit.js"><' + '/script>');
			document.write('<link href="/js/qunit/qunit.css" rel="stylesheet"/>');
		}
	</script>

	<script src="polyfills/url.js"></script>

</head>
<body>

	<div id="qunit"></div>
	<div id="qunit-fixture"></div>


	<script>
		if (window.wallaby){
			wallaby.delayStart();
		}
		else {
			QUnit.config.autostart = false;
		}

		function promiseTest(name, callback) {
			asyncTest(name, function () {
				callback().then(start, function (err) {
					ok(false, 'PromiseTest::failed');
					deepEqual(JSON.stringify(err), '', 'Error');
					start();
				});
			});
		}

		requirejs.config({
			baseUrl: '../src/',
			paths: {
				tests: '../tests/',
				Emitter: '/JSSDK/Emitter/Emitter'
			}
		});


		require([
			'tests/querystring.tests',
			'tests/url.tests',
			'tests/loader.tests',
			'tests/pilot.tests'
		], function () {
			if (window.wallaby) {
				wallaby.start()
			} else {
				QUnit.start();
			}
		});
	</script>


</body>
</html>
